<!DOCTYPE html>
<html>
<head>
  <title>Decipher Clips</title>
  <link rel="stylesheet" href="codemirror-5.43.0/theme/3024-day.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/3024-night.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/abcdef.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/ambiance-mobile.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/ambiance.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/base16-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/base16-light.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/bespin.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/blackboard.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/cobalt.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/colorforth.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/darcula.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/dracula.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/duotone-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/duotone-light.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/eclipse.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/elegant.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/erlang-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/gruvbox-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/hopscotch.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/icecoder.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/idea.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/isotope.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/lesser-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/liquibyte.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/lucario.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/material.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/mbo.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/mdn-like.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/midnight.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/monokai.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/neat.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/neo.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/night.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/oceanic-next.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/panda-syntax.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/paraiso-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/paraiso-light.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/pastel-on-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/railscasts.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/rubyblue.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/seti.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/shadowfox.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/solarized.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/ssms.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/the-matrix.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/tomorrow-night-bright.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/tomorrow-night-eighties.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/ttcn.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/twilight.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/vibrant-ink.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/xq-dark.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/xq-light.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/yeti.css">
  <link rel="stylesheet" href="codemirror-5.43.0/theme/zenburn.css">
  <link rel="stylesheet" href="codemirror-5.43.0/lib/codemirror.css">
  <link rel="stylesheet" href="codemirror-5.43.0/addon/hint/show-hint.css">
  <link rel="stylesheet" href="codemirror-5.43.0/addon/dialog/dialog.css">
  <link rel="stylesheet" type="text/css" href="codemirror-5.43.0/addon/fold/foldgutter.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light" id="nav-toolbar">
  <a class="navbar-brand" href="#"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          File
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#" data-input-toggle="open-file-input">Open</a>
          <a class="dropdown-item" href="#">Save</a>
          <input type="file" name="textfile" id="open-file-input" class="hidden">
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#" onclick="close()">Close</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Edit
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="#">Find</a>
          <a class="dropdown-item" href="#">Find Next</a>
          <a class="dropdown-item" href="#">Replace</a>
          <a class="dropdown-item" href="#">Replace All</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Preferences
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" data-toggle="modal" href="#settingsModal">Settings</a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<div class="container-fluid" id="code-container">
  <textarea id="code"></textarea>
</div>

<!-- Modal -->
<div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Settings</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#EditorSettingsTab">Editor</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#HotkeySettingsTab">Hotkey</a>
          </li>
        </ul>
        <div class="tab-content">
          <div id="EditorSettingsTab" class="tab-pane-setting tab-pane active">
            <h5>Editor Settings</h5>
            <form>
              <div class="form-group row">
                <label class="col-form-label col-md-2">Editor Theme</label>
                <div class="col-md-10">
                  <select class="form-control" id="themeSelector"></select>
                </div>
              </div>
            </form>
          </div>
          <div id="HotkeySettingsTab" class="tab-pane-setting tab-pane fade">
            <h5>Hotkey Settings</h5>
            <table class="table" id="hotkeyTable">
              <thead>
                <tr>
                  <th>Action</th>
                  <th>Key</th>
                </tr>
              </thead>
              <tbody>
                
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-------------------------- CODEMIRROR SCRIPTS -------------------------------------------------->
<script type="text/javascript" src="codemirror-5.43.0/lib/codemirror.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/mode/xml/xml.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/fold/foldgutter.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/fold/foldcode.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/fold/xml-fold.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/mode/htmlmixed/htmlmixed.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/hint/show-hint.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/hint/xml-hint.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/hint/html-hint.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/hint/javascript-hint.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/edit/closetag.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/edit/trailingspace.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/edit/matchtags.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/edit/closebrackets.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/scroll/annotatescrollbar.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/search/matchesonscrollbar.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/dialog/dialog.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/search/jump-to-line.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/search/search.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/search/match-highlighter.js"></script>
<script type="text/javascript" src="codemirror-5.43.0/addon/search/searchcursor.js"></script>
<script type="text/javascript" src="js/decipher-clips.js"></script>
<!------------------------ BOOTSTRAP SCRIPTS --------------------------------------------------->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(e) {

  var questionElements = ["col", "row", "choice"]

  var questionAttributes = {
    adim: ["rows","cols","choices","auto"],
    aggregate: null,
    alt: null,
    altLabel: null,
    averages: ["none","rows","cols","choices","nosummary","summary"],
    below: null,
    blankIfZero: ["1", "0"],
    blankValue: ["1", "0"],
    choiceCond: null,
    choiceGroups: ["report","survey","restrict"],
    choiceShuffle: ["flip","rflip","rotate","reverse-rotate","rrotate"],
    colCond: null,
    colGroups: ["report","survey","restrict"],
    colLegend: ["default","none","both","top","bottom","group","beforeGroup"],
    colLegendRows: null,
    colShuffle: ["flip","rflip","rotate","reverse-rotate","rrotate"],
    cond: null,
    comment: null,
    dataSource: null,
    dataRef: null,
    exec: null,
    grouping: null,
    horizontalPercentages: ["1", "0"],
    keepWith: null,
    label: null,
    noTranslate: ["title","comment"],
    open: ["default","left","right"],
    optional: ["1", "0"],
    pii: null,
    ratingDirection: ["default","reverse"],
    rightOf: null,
    rowCond: null,
    rowGroups: ["report","survey","restrict"],
    rowLegend: ["default","both","right","left"],
    rowShuffle: ["flip","rflip","rotate","reverse-rotate","rrotate"],
    showSource: ["1", "0"],
    shuffle: ["none","rows","cols","choices"],
    shuffleBy: null,
    sort: ["none","rows","cols","choices","desc","asc","percentages"],
    sortChoices: ["none","asc","desc","survey","report"],
    sortCols: ["none","asc","desc","survey","report"],
    sortRows: ["none","asc","desc","survey","report"],
    style: null,
    title: null,
    type: ["none","rating"],
    uses: null,
    values: ["none","order"],
    where: ["survey","report","summary","none","notdp"],
    tv: ["auto","off","force"],
    translateable: ["1", "0"],
    randomize: ["1", "0"],
    disabled: ["1", "0"],
    "ss:rowClassNames": null,
    "ss:colClassNames": null
  }

  var styleAttributes = {
    name: [
      "global.page.head",
      "question.header",
      "question.element",
      "respview.client.meta",
      "survey.question",
      "question.left",
      "respview.client.css",
      "survey.question.instructions",
      "question.right",
      "respview.client.js",
      "survey.question.answers.start",
      "el.radio",
      "survey.header",
      "question.group-column",
      "el.checkbox",
      "survey.logo",
      "question.group-column-cell",
      "el.select.header",
      "buttons",
      "question.top-legend",
      "el.select.default",
      "button.continue",
      "question.left-blank-legend",
      "el.select.element",
      "button.finish",
      "question.top-legend-item",
      "el.select.footer",
      "button.cancel",
      "question.right-blank-legend",
      "el.textarea",
      "survey.completion",
      "question.group-3",
      "el.noanswer",
      "survey.respview.footer",
      "question.group-2",
      "el.text",
      "survey.respview.footer.support",
      "question.group",
      "el.open",
      "button.goback",
      "question.row",
      "el.image",
      "page.head",
      "question.col-legend-row",
      "question.col-legend-row-item",
      "question.na.row",
      "question.bottom-legend",
      "question.bottom-legend-item",
      "question.footer",
      "survey.question.answers.end",
      "question.after"
    ],
    label: null,
    copy: null,
    cond: ["0", "1"],
    rows: null,
    cols: null,
    mode: ["instead", "before", "after"],
    with: null,
    wrap: ["ready"]
  }

  var questionElementsAttributes = {
    open: ["1", "0"],
    openSize: null,
    label: null,
    groups: null,
    value: null,
    exclusive: ["1", "0"],
    aggregate: ["1", "0"],
    percentages: ["1", "0"],
    optional: ["1", "0"],
    range: null,
    okUnique: ["1", "0"],
    openOptional: ["1", "0"],
    colLegend: ["1", "0"],
    extraError: ["1", "0"],
    amount: null,
    size: null,
    averages: ["1", "0"],
    cond: ["1", "0"]
  }

  var checkboxAttributes = {
    atleast: null,
    atmost: null,
    exactly: null,
    pipeMultiple: null,
    groupRestrict: ["none", "cols"]
  }



  var tags = {
    radio: {
      attrs: questionAttributes,
      children: questionElements
    },
    checkbox: {
      attrs: Object.assign({}, questionAttributes, checkboxAttributes),
      children: questionElements
    },
    select: {
      attrs: questionAttributes,
      children: questionElements
    },
    text: {
      attrs: questionAttributes,
      children: questionElements
    },
    textarea: {
      attrs: questionAttributes,
    },
    number: {
      attrs: questionAttributes,
      children: questionElements
    },
    row: {
      attrs: questionElementsAttributes
    },
    col: {
      attrs: questionElementsAttributes
    },
    choice: {
      attrs: questionElementsAttributes
    },
    style: {
      attrs: styleAttributes
    }
  };

  function completeAfter(cm, pred) {
    var cur = cm.getCursor();
    if (!pred || pred()) setTimeout(function() {
      if (!cm.state.completionActive)
        cm.showHint({completeSingle: false});
    }, 100);
      return CodeMirror.Pass;
  }

  function completeIfAfterLt(cm) {
    return completeAfter(cm, function() {
      var cur = cm.getCursor();
      return cm.getRange(CodeMirror.Pos(cur.line, cur.ch - 1), cur) == "<";
    });
  }

  function completeIfInTag(cm) {
    return completeAfter(cm, function() {
      var tok = cm.getTokenAt(cm.getCursor());
      if (tok.type == "string" && (!/['"]/.test(tok.string.charAt(tok.string.length - 1)) || tok.string.length == 1)) return false;
      var inner = CodeMirror.innerMode(cm.getMode(), tok.state).state;
      return inner.tagName;
    });
  }


  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    mode: "xml",
    lineNumbers: true,
    autoCloseTags: true,
    autoCloseBrackets: true,
    matchClosing: true,
    theme: localStorage.getItem("editortheme") || "solarized dark",
    foldGutter: true,
    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
    hintOptions: {schemaInfo: tags},
    tabSize: 2
  });
    
  // editor.on("keyup", function(cm) {
  //   if (event.keyCode > 64 && event.keyCode < 91){
  //     CodeMirror.showHint(cm, CodeMirror.hint.decipherHint, {completeSingle: false})
  //   }    
  // })
  // //Experimental code
  // CodeMirror.registerHelper("hint", "decipherHint", function(editor, options) {
  //     console.log(options)
  //     // var cur = editor.getCursor();
  //     // var curLine = editor.getLine(cur.line);
  //     // var start = cur.ch;
  //     // var end = start;
  //     // while (end < curLine.length && /[\w\:]/.test(curLine.charAt(end))) ++end;
  //     // while (start && /[\w\:]/.test(curLine.charAt(start - 1))) --start;
  //     // var curWord = start !== end && curLine.slice(start, end);
  //     // var filterRegex = new RegExp("^" + curWord, "i")
  // })

  // CodeMirror.commands.autocomplete = function(cm) {
  //   CodeMirror.showHint(cm, CodeMirror.hint.decipherHint)
  // }


  var decipherclips = new DecipherClips(editor)

  editor.setOption("extraKeys", {
    "F1": function() {
      decipherclips.convertToRows()
    },
    "F2": function() {
      decipherclips.convertToCols()
    },
    "F3": function() {
      decipherclips.convertToChoices()
    },
    "Ctrl-1": function() { 
        decipherclips.makeRows() 
    },
    "Ctrl-2": function() { 
        decipherclips.makeCols() 
    },
    "Ctrl-3": function() { 
        decipherclips.makeChoices() 
    },
    "Ctrl-4": function() { 
        decipherclips.makeRowsMatchValues() 
    },
    "Ctrl-5": function() { 
        decipherclips.makeColsMatchValues() 
    },
    "Ctrl-6": function() { 
        decipherclips.makeChoicesMatchValues() 
    },
    "Ctrl-7": function() { 
        decipherclips.addValues() 
    },
    "Ctrl-8": function() { 
        decipherclips.removeValues() 
    },
    "Alt-1": function() { 
        decipherclips.makeRowsMatchLabel() 
    },
    "Alt-2": function() { 
        decipherclips.makeColsMatchLabel() 
    },
    "Alt-3": function() { 
        decipherclips.makeChoicesMatchLabel() 
    },
    "Ctrl-R": function() { 
        decipherclips.makeRadio() 
    },
    "Ctrl-E": function() { 
        decipherclips.makeText() 
    },
    "Ctrl-S": function() { 
        decipherclips.makeSelect() 
    },
    "Shift-Ctrl-E": function() { 
        decipherclips.makeTextArea() 
    },
    "Ctrl-Q": function() {
        decipherclips.makeNumber()  
    },
    "Shift-Ctrl-C": function() { 
        decipherclips.makeCheckbox() 
    },
    "Shift-Ctrl-G": function() {
        decipherclips.makeGroups()  
    },
    "Ctrl-B": function() { 
      var blockLabel = prompt("Enter label for block: ")
      blockLabel != null ? decipherclips.makeBlock(blockLabel) : null
    },
    "Ctrl-L": function() { 
        decipherclips.makeLoop() 
    },
    "Ctrl-H": function() { 
        var htmlLabel = prompt("Enter label for HTML: ")
        htmlLabel != null ? decipherclips.makeHTML(htmlLabel) : null
    },
    "Alt-A": function() {
      var group = prompt("Enter group to assign: ")
      decipherclips.assignGroup(group)
    },
    "Alt-R": function() {
        decipherclips.removeGroup()  
    },
    "Alt-W": function() {
      var tag = prompt("Enter tag: ")
      decipherclips.wrapTag(tag)  
    },
    "Ctrl-F": function() {
      CodeMirror.commands.find(editor)
    },
    "Ctrl-.": function() {
      CodeMirror.commands.findNext(editor)
    },
    "Ctrl-,": function() {
      CodeMirror.commands.findPrev(editor)
    },
    "Shift-Ctrl-R": function() {
      CodeMirror.commands.replace(editor)
    },
    "Alt-R": function() {
      CodeMirror.commands.replaceAll(editor)
    },
    "Alt-C": function() {
      decipherclips.makeComment()
    },
    hintOptions: {schemaInfo: tags},
    "'<'": completeAfter,
    "'/'": completeIfAfterLt,
    "'='": completeIfInTag,
    "\"": completeIfInTag,
    "Ctrl-Space": "autocomplete"
  })




  //Open File Button 
  $("a[data-input-toggle='open-file-input']").on("click", function(e) {
    $("#open-file-input").click()
  })

  //Handle file open event 
  $("#open-file-input").on("change", function(e) {
    var file = event.target.files[0]
    var reader = new FileReader()
    console.log(file.name)
    if(!/[a-zA-Z0-9+_-]+(?=\.xml)/.test(file.name)) {
      alert("Invalid file")
    } else {
      reader.onload = function(event) {
        editor.setValue(event.target.result)
      }
      reader.readAsText(file)
    }
  })

  //Append theme option


  $("#themeSelector").change(function(e) {
    editor.setOption("theme", e.currentTarget.value)
    localStorage.setItem("themesetting", e.currentTarget.value)
  })

  hotkeySettings = {
    MakeRows: {
      Name: "Make rows",
      Key: "Ctrl-1"
    },
    MakeRowsMatchLabel: {
      Name: "Make rows match label",
      Key: "Alt-1"
    },
    MakeRowsMatchValues: {
      Name: "Make rows match values",
      Key: "Ctrl-4"
    },
    MakeCols: {
      Name: "Make columns",
      Key: "Ctrl-2"
    },
    MakeColsMatchLabel: {
      Name: "Make columns match label",
      Key: "Alt-2"
    },
    MakeColsMatchValues: {
      Name: "Make columns match values",
      Key: "Ctrl-5"
    },
    MakeChoices: {
      Name: "Make choices",
      Key: "Ctrl-3"
    },
    MakeChoicesMatchLabel: {
      Name: "Make choices match label",
      Key: "Alt-3"
    },
    MakeChoicesMatchValues: {
      Name: "Make choices match values",
      Key: "Ctrl-6"
    },
    MakeGroups: {
      Name: "Make groups",
      Key: "Shift-Ctrl-G"
    },
    AssignGroup: {
      Name: "Assign group",
      Key: "Alt-A"
    },
    RemoveGroup: {
      Name: "Remove group",
      Key: "Alt-G"
    },
    AddValues: {
      Name: "Add value attribute",
      Key: "Ctrl-7"
    },
    RemoveValues: {
      Name: "Remove value attribute",
      Key: "Ctrl-8"
    },
    MakeRadio: {
      Name: "Make radio",
      Key: "Ctrl-R"
    },
    MakeCheckbox: {
      Name: "Make checkbox",
      Key: "Shift-Ctrl-C"
    },
    MakeSelect: {
      Name: "Make select",
      Key: "Ctrl-S"
    },
    MakeText: {
      Name: "Make text",
      Key: "Ctrl-E"
    },
    MakeTextArea: {
      Name: "Make textarea",
      Key: "Shift-Ctrl-E"
    },
    MakeNumber: {
      Name: "Make number",
      Key: "Ctrl-Q"
    },
    MakeBlock: {
      Name: "Make block",
      Key: "Ctrl-B"
    },
    MakeHTML: {
      Name: "Make HTML",
      Key: "Shift-Ctrl-H"
    }
  }

  //Append themes to theme selector 

  var themes = $("link[href*='theme']")
  var themeSelector = $("#themeSelector")

  themes.each(function(index, element) {
    var themeName = $(element).attr("href").match(/[a-zA-Z0-9+_-]+(?=\.css)/)
    if(themeName == "solarized") {
      $(themeSelector)
      .append($("<option>", {
        value: themeName + " light",
        text: themeName + " light"
      }))
      .append($("<option>", {
        value: themeName + " dark",
        text: themeName + " dark"
      }))
    } else {
      $(themeSelector).append($("<option>", {
        value: themeName,
        text: themeName
      }))
    }
  })

  //Set default theme
  $(themeSelector).val(editor.getOption("theme"))

  for(var property in hotkeySettings) {
    
    var setting = hotkeySettings[property]
    var hotkeyTable = $("#hotkeyTable tbody")
    var hotkeyTableRow = $("<tr>", {
      "class": "key-binding-row"
    })

    for(var key in setting) {
      $(hotkeyTableRow).append($("<td>", {
        "class": setting[key],
        "data-property": setting[key],
        "text": setting[key]
      }))
    }
    hotkeyTable.append(hotkeyTableRow)
  }


})
</script>
<script type="text/javascript"></script>
</body>
</html>